generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         String     @id @default(uuid())
  username   String
  email      String     @unique
  password   String
  profileImg String?
  role       UserRole   @default(CUSTOMER)
  isDelated  Boolean    @default(false)
  status     UserStatus @default(ACTIVE)
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  shop       Shop?

  @@map("users")
}

model Shop {
  id          String     @id @default(uuid())
  vendorId    String     @unique
  vendor      User       @relation(fields: [vendorId], references: [id])
  name        String
  logo        String
  description String
  status      ShopStatus @default(ACTIVE)
  isDelated   Boolean    @default(false)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  Products    Products[]

  @@map("shop")
}

model Categories {
  id        String     @id @default(uuid())
  name      String     @unique
  isDelated Boolean    @default(false)
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  products  Products[]

  @@map("categories")
}

model Products {
  id             String     @id @default(uuid())
  shopId         String
  shop           Shop       @relation(fields: [shopId], references: [id])
  categoryId     String
  category       Categories @relation(fields: [categoryId], references: [id])
  name           String     @unique
  price          Decimal
  description    String
  inventoryCount Int
  discount       Decimal?
  productImg     String?
  isDelated      Boolean    @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("products")
}

enum UserRole {
  ADMIN
  VENDOR
  CUSTOMER
}

enum UserStatus {
  ACTIVE
  BLOCKED
  SUSPENDED
}

enum ShopStatus {
  BLOCKED
  ACTIVE
}
